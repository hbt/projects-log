<html>

<head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8">
    <meta name="generator" content="AsciiDoc 8.6.9">
    <title></title>

    <link href="../assets/stylesheets/asciidoc.css"/>
    <link href="../assets/javascripts/asciidoc.js"/>
</head>

<body class="article">
<div id="header">
</div>

<div id="content">
    <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This documents how much of a pain in the ass software development still is in 2016.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="project-set-up">Project set up</h2>
<div class="sectionbody">
<div class="paragraph">
<p>so you wanna fix a bug on chrome? Easy, download the project, build it, fix it and done. Right? Guys?</p>
</div>
<div class="paragraph">
<p>Yes and no.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="downloading-the-project">downloading the project</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Clone the repository. Wait a few hours because this is Canada and Internet sucks.</p>
</div>
<div class="paragraph">
<p>We have the entire source code and its history. Now, let&#8217;s build it. But first, configure it.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configure-the-project">configure the project</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Look into the build instructions because chromium is too cool to use standard tools or stick to the same ones for more than a year.
Figure out what the fuck each tool does because the names are meaningless.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>gyp</p>
</li>
<li>
<p>gclient</p>
</li>
<li>
<p>ninja</p>
</li>
<li>
<p>gn</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>can&#8217;t build just yet. First, install the dependencies and hope to God your platform/OS version is supported. Luckily, we are. Ubuntu precise 64.
Install the dependencies and hope you don&#8217;t break something else by updating a library and the install goes smoothly.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="build-and-fix">build and fix</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Build the project. You can go shop for a noose and come back, it won&#8217;t be done. Hours of compiling.
Hope the compilation doesn&#8217;t break in the middle because some weird library hates you.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="test-the-binary">test the binary</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Binary works but it&#8217;s a 2G. Make a change in the code and it takes 30m to compile the files.
Oops, forgot to configure the project and disable debugging symbols and other normal shit.</p>
</div>
<div class="paragraph">
<p>I guess, F me for asking for sane defaults out of the box, right?</p>
</div>
<div class="paragraph">
<p>Back to configure and build but this time it only takes 2h instead of 5h.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="finally-ready">Finally ready</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Project is built, compiled, changing code doesnt take too long to compile (unless it&#8217;s a popular header or template file).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="start-an-editor">Start an editor</h2>
<div class="sectionbody">
<div class="paragraph">
<p>No idea which directory to pick to begin hunting this bug? Why not load the whole project.
30m to build file indices in IDE so I can have some decent autocompletion when typing a filename.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="go-to-symbol">Go to symbol</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Nah, you don&#8217;t need it. Remember, we are different. We don&#8217;t use make files or CMake or any standard shit. So, CLion can&#8217;t go anywhere.
Eclipse can but I haven&#8217;t used eclipse. I don&#8217;t have my themes, my preferences, my plugins, my vim bindings, nothing.
So, the choice is between sticking with an editor suite that I&#8217;ve been using for years but doesn&#8217;t have a key feature or switching to Eclipse and waste time searching for features that I take for granted.</p>
</div>
<div class="paragraph">
<p>Fuck "go to symbol", who needs it. I&#8217;ve got search.</p>
</div>
<div class="paragraph">
<p>Remember why we here.
Oh right, the white flash bug. This gotta be some constant somewhere named white or some header file with the color code.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="let-the-search-begin">Let the search begin</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Hunt every instance of white. Color codes, hex codes, html codes and bookmark the most interesting ones.
Like the ones mentioning background.</p>
</div>
<div class="paragraph">
<p>Hunt and change.</p>
</div>
<div class="paragraph">
<p>But wait, wait, wait. This is not software engineering, aren&#8217;t you supposed to understand the architecture of the project, how the pages are rendered and life is created?</p>
</div>
<div class="paragraph">
<p>Why not launch a debugger, click on the new tab button, then step through the code until you see the white flash?</p>
</div>
<div class="paragraph">
<p>hahahahahahahahahaha. You poor soul. How long will it take to configure the debugger in CLion or find an editor? How do you debug it? Do I have to recompile it with debugging symbols on? What if the white flash appears post rendering and I completely miss the instruction?
Nope, searching for any mention of white would be faster than all of the above but good try.</p>
</div>
<div class="paragraph">
<p>Eventually, with trial and error, three locations are found where when the color is switched to black, the white flash disappears.</p>
</div>
<div class="paragraph">
<p>Record the location, branch the code, revert all the shit I modified that is irrelevant and commit.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="let-s-browse-for-a-bit-without-white-flash">Let&#8217;s browse for a bit without white flash.</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Woot, Woot.
No white flash.</p>
</div>
<div class="paragraph">
<p>Oops, flash player is not working. Google around, you have to do additional shit to include it in the compile.
Look into how it&#8217;s loaded in the default chromium, copy that. Pass the arguments to the binary. It works. But it crashes.
What the fuck? Look for different versions. Nope. Still crashes.
Test it on google chrome. It works. So, problem is not the flash player.</p>
</div>
<div class="paragraph">
<p>Look at the git log. Motherfucker modified the flash player recently. Revert to a tag, pull, rebuild. Flash player works.</p>
</div>
<div class="paragraph">
<p>I hate this so much.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="wanna-share-the-work">wanna share the work</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Easy, right? It&#8217;s git! We have github and bitbucket. I will share it for free.</p>
</div>
<div class="paragraph">
<p>Oops. My upload connection sucks balls and the repo is enormous.
Alright, rent a VM, clone the repo and push. Less than 1$</p>
</div>
<div class="paragraph">
<p>Clones in less than a few minutes. Fast Internet feels so good.
Not so fast, can&#8217;t push to bitbucket. Repo has a limit of 2G and we have to use GitFS, delete large files and ask your mom. Fuck bitbucket.
What about github?</p>
</div>
<div class="paragraph">
<p>git push. Wait for deltas, wait for compress (big big repo), crashes.</p>
</div>
<div class="paragraph">
<p>We have to push it in chunks. Something like this</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>git push -u bb_origin HEAD~300000:refs/heads/master
git push bb_origin HEAD~200000:refs/heads/master
git push bb_origin HEAD~100000:refs/heads/master
git push bb_origin master</code></pre>
</div>
</div>
<div class="paragraph">
<p>How small is the linux repo? Why doesnt the push command break it into chunks for me? Whatever. Push it into chunks.
Nope, same error as bitbucket.</p>
</div>
<div class="paragraph">
<p>Alright, hope someone already uploaded chromium. Search around (github and bitbucket search feature sucks). A lot of repos, most out of date. Found one.
Fork it. Merge. Push.
Boom.</p>
</div>
<div class="paragraph">
<p>Shared my work.</p>
</div>
<div class="paragraph">
<p>Nobody will give a fuck about the code, how about producing binaries for quick testing?</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sharing-binaries">sharing binaries</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Look for instructions online. Tons of outdated shit and scripts that dont exist. Google groups are useless and people not answering.
Fuck them. I will figure it out on my own.</p>
</div>
<div class="paragraph">
<p>Look around the repo. Find the script. Start reading them and they look like template and stuff being controlled by something else.
Look at the build tools for a task.</p>
</div>
<div class="paragraph">
<p>Found one. Google the task. Some old instructions but gives me a good idea.
Run the task. It crashes. Dependencies issues. Libraries compiled without version number.
Fuck that, ignore it. Produces deb files for ubuntu.</p>
</div>
<div class="paragraph">
<p>Test deb files. Doesn&#8217;t work, libraries hate my guts.
Fix the libraries by copying them manually and using ldconfig.</p>
</div>
<div class="paragraph">
<p>OK. It works.</p>
</div>
<div class="paragraph">
<p>Fuck it, just share the deb files and libraries separately and [provide instructions](<a href="https://github.com/hbtlabs/chromium-white-flash-fix" class="bare">https://github.com/hbtlabs/chromium-white-flash-fix</a>).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="tell-people-about-it">tell people about it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Find the bug tracker, google around for hardcore users. See who gives a shit.</p>
</div>
<div class="paragraph">
<p>[<a href="https://bugs.chromium.org/p/chromium/issues/detail?id=470669" class="bare">https://bugs.chromium.org/p/chromium/issues/detail?id=470669</a>](<a href="https://bugs.chromium.org/p/chromium/issues/detail?id=470669" class="bare">https://bugs.chromium.org/p/chromium/issues/detail?id=470669</a>)</p>
</div>
<div class="paragraph">
<p>The deb file is not ideal but it works.
It would be great to build it for popular platforms like windows or macosx.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s look into that, ooh wait. I have to do all of the above but on windows and deal with those dependency/library problems. FFFFFF that.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="i-m-tired">I&#8217;m tired.</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This is what&#8217;s it&#8217;s like to try to change code in a big project.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You don&#8217;t have access to fast Internet</p>
</li>
<li>
<p>You don&#8217;t have access to distributed compilation</p>
</li>
<li>
<p>You don&#8217;t know which editors are best suited for the project considering the tools</p>
</li>
<li>
<p>You don&#8217;t have experience debugging this particular project</p>
</li>
<li>
<p>You don&#8217;t have the resources to ask which documentation is relevant and which is outdated</p>
</li>
<li>
<p>You don&#8217;t have access to google internal tools to produce binaries for multiple platforms and share your work easily</p>
</li>
<li>
<p>You don&#8217;t have access to mentors guiding you and answering your questions as you go</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Most of those things can&#8217;t be changed but a few can.
Like having an easy way to just start working. Whether it&#8217;s a VM with everything installed, configured and pre-compiled, just ready to take your code changes.
Or some cloud tool to provide distributed computing/compilation at a fraction of the cost.
Whatever it is would be better than this gigantic waste of time and energy.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="in-the-end-i-prevail">In the end, I prevail</h2>
<div class="sectionbody">
<div class="paragraph">
<p>White flash is fixed. I can browse peacefully. Suck it. I don&#8217;t need you.</p>
</div>
</div>
</div>
</div>

</body>
</html>


